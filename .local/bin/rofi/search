#!/bin/sh

# Search Urls
s_url='https://duckduckgo.com/?q='
yt_url='https://www.youtube.com/results?search_query='
pling_url='https://www.pling.com/find?search='
# startpage_url='https://www.startpage.com/sp/search?query='
google_url='https://www.google.com/search?hl=en&q='
amazon_in_url='https://www.amazon.in/s?k='
github_url='https://github.com/search?q='

# Bang function
search_websites(){ $BROWSER "${1}$(echo "$3" | sed "s/\;${2}//g")" > /dev/null 2>&1 & }

search_history="$HOME"/.cache/search-history

if [ -z "$@" ]; then
	[ -f $search_history ] && tac $search_history
else
	! grep -qw "^$@" $search_history && echo "$@" >> $search_history
	case "$@" in
		*\;gh*) search_websites "${github_url}" 'gh' "$@" ;;
		*\;y*) search_websites "${yt_url}" 'y' "$@" ;;
		*\;p*) search_websites "${pling_url}" 'p' "$@" ;;
		# *\;s*) search_websites "${startpage_url}" 's' "$@" ;;
		*\;g*) search_websites "${google_url}" 'g' "$@" ;;
		*\;a*) search_websites "${amazon_in_url}" 'a' "$@" ;;
		*)$BROWSER "${s_url}${@}" > /dev/null 2>&1 & ;;
	esac
fi
