#!/bin/sh

LOC="$HOME"/lifeisfun
. "$HOME"/.local/bin/bspwm/codeSplit

QUERY="$(exa -aD $LOC | rofi -dmenu -p 'dir')"

openDoc(){
	bspc desktop -f '^4'
	case "$1" in
		rust) $READER "$HOME"/lifeisfun/rust/rust-lang.pdf ;;
	esac
}

if [ -n "$QUERY" ]; then
	openDoc "$QUERY" &
	if [ -n "$(exa -aD $LOC/$QUERY)" ]; then
		QUERY2="$LOC/$QUERY/$(exa -aD $LOC/$QUERY | rofi -dmenu -p 'sub dir')"
	else
		QUERY2="$LOC/$QUERY"
	fi
else
	exit 1
fi

openTerminals(){ for i in $(seq 2); do $TERMINAL -cd "$QUERY2"; done; }
codeSplit openTerminals 
