#!/bin/sh

#Apps
iv="$IMAGEVIEWER"
vv="$VIDEOPLAYER"
vf="ffplay"
pv="$READER"
te="$EDITOR"
h="devour"
dis="fzf"
perm="doas"
pager="less"

#Paths
whatImg="$HOME/dl/What"*
hosts="$HOME"/.local/share/.begone
todo="$HOME"/.local/share/.todo
hexAlpha="$HOME"/.local/share/.hex-alpha

main() {
	case "$1" in
		*.jp*g | *.png | *.webp ) $h $iv "$1" ;;
		*.mkv | *.mp4 | *.webm | *.gif | *.avi | *youtu* | *.mp3 ) $h prime-run $vv "$1" ;;
		*.pdf ) $h $pv "$1" ;;
		-a) ls | grep  'jpeg\|jpg\|png\|webp' | $h $iv -t - ;;
		-w) $h $iv $whatImg ;;
		-f) $h $vf /dev/video0 ;;
		-d) shift; case "$1" in
				*.pdf ) $h $pv "$1" && rm -i "$1" ;;
				*) $h $iv $whatImg && rm -I $whatImg ;;
			esac ;;
		-s) shift; $perm $te "$1" ;;
		-p) ls *.pdf | $dis | xargs -rI {} $h $pv {} ;;
		-t) $te $todo ;;
		-hosts) $te $hosts ;;
		-ha) $pager $hexAlpha ;; 
		*) [ -n "$@" ] && $te "$1" ;;
	esac
}

if [ -n "$1" ]; then
	main "$@"
else
	main "$(ls -F | grep -v / | $dis)"
fi
