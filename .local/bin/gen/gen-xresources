#!/bin/sh

loc="$HOME"/.config/x11

loc_x="$loc"/xre

xre="$loc"/Xresources
xin="$loc"/xinitrc

prof="$HOME"/.config/shell/.profile

is_urxvtc(){ grep -q 'TERMINAL="urxvtc"' "$prof"; }
is_dwm(){ grep -q 'dwm' "$xin"; }

fndf(){ find "$loc_x" -type f -not -name "$1" -exec cat {} \+ > "$xre"; }
if [ -f "$xre" ]; then
	if ( is_urxvtc && is_dwm ); then
		cat "$loc_x"/* > "$xre"
	elif ( is_urxvtc || is_dwm); then
		if ( is_urxvtc ); then
			fndf 'dwm'
		elif ( is_dwm ); then
			fndf 'urxvt'
		fi
	fi
fi

xrdb -load "$xre"
