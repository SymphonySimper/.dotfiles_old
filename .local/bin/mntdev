#!/bin/sh

red=`syl red`; green=`syl green`; bold=`syl bold`; reset=`syl reset`

error(){ echo "$bold$red$1$reset"; }
success(){ echo "$bold$green$1$reset"; }

#Path
nobita="$HOME/nobita"; ntfs="$HOME/ntfs"; usb="$HOME/usb"

ntfsMount(){ sudo ntfs-3g /dev/$1 $2 && success "$3 mounted"; }
mountUsb(){ sudo mount -o umask=0,uid=nobody,gid=nobody /dev/$1 $HOME/usb/ && success "Usb mounted"; }
umountDev(){ sudo umount $1; }

#Gets the mounted point
whatd=$(lsblk -lp | awk '/nobita/ || /usb/ || /ntfs/ {print $1}')
umountAll(){
	if lsblk | grep -q 'nobita'; then
		umountDev $whatd && success "Nobita umounted"
	elif lsblk | grep -q 'ntfs'; then
		umountDev $whatd && success "Ntfs umounted"
	elif lsblk | grep -q 'usb'; then
		umountDev $whatd && success "Usb umounted"
	else error "! nobita | ntfs | usb"; fi
}

case "$1" in
	-u) shift; mountUsb $1 ;;
	-n) shift; ntfsMount $1 $ntfs "Ntfs" ;;
	-o) shift; umountAll ;;
	*) ntfsMount sdb1 $nobita "Nobita" ;;
esac
