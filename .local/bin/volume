#!/bin/sh

app="pulsemixer"
noti="dunstify -h string:x-dunst-stack-tag:audio"
getMute=$($app --get-mute)

getVol(){ $app --get-volume | awk '{print $1}'; }
muteNoti(){ [ $getMute -eq 0 ] && $noti "Muted" || $noti "Unmuted"; }

notify(){
	case "$1" in
		-c) $noti "Volume: $(getVol)" -h int:value:$(getVol) ;;
		-m) muteNoti ;;
	esac
}

changeVol(){ 
	if [ $getMute -eq 0 ];then
		$app --change-volume $1 && notify -c 
	else
		$noti "Audio is muted" "Unmute to change volume"
	fi
}

toggleMute(){ $app --toggle-mute && notify -m; }

case "$1" in
	-u) changeVol +2 ;;
	-d) changeVol -2 ;;
	-m) toggleMute ;;
esac
