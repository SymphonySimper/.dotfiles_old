#!/bin/sh

v="$EDITOR"

red=`syl r`; bold=`syl B`; reset=`syl R`

p="$HOME/.local/bin"
path="$p/"; pathR="$p/rofi"; pathA="$p/aliases/"
scripts="$p/.paths/scripts"

add="#!/bin/sh"

sortMe(){ cat $1 | sort -o $1; }
errorMsg(){ echo "$bold$red$1$reset"; } 
createFile(){ [ -f "$1" ] && (errorMsg "File exists" && exit 1) || (echo $add > "$1" && letmein "$1"); }
case "$1" in
	-r) 
		shift; createFile "$pathR$1" &&
		echo "$1		$pathR$1" >> $scripts &&
		sortMe "$scripts" &&
		$v "$pathR$1" ;;
	-a)
		shift; createFile "$pathA$1" &&
		echo "$1		$pathA$1" >> $scripts &&
		sortMe "$scripts" &&
		$v "$pathA$1" ;;
	-d)
		shift; rm "$(grep -w "$1" $scripts | awk '{ print $2 }')" &&
		( grep -qw "$1" $scripts ) && (sed "/$1$/d" -i $scripts && errorMsg "$1 rm from scripts") || errorMsg "$1 not found" ;;
	*) 	
		createFile "$path$1" &&
		echo "$1		$path$1" >> $scripts &&
		sortMe "$scripts" &&
		$v "$path$1" ;;
esac
