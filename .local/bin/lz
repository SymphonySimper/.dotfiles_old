#!/bin/sh

v="$EDITOR"

red=`syl r`; bold=`syl B`; reset=`syl R`

p="$HOME/.local/bin"
path="$p/"; pathR="$p/rofi"; pathA="$p/aliases/"; pathT="$p/tools/" pathS="$HOME/.config/shell/"
scripts="$p/.paths/scripts"; shell="$p/.paths/shell"

add="#!/bin/sh"

sortMe(){ cat $1 | sort -o $1; }
errorMsg(){ echo "$bold$red$1$reset"; } 
createFile(){ [ -f "$1" ] && { errorMsg "File exists" && exit 1; } || { echo $add > "$1" && letmein "$1";} ; }

case "$1" in
	-r) 
		shift; createFile "$pathR$1" &&
		echo "$1		$pathR$1" >> $scripts &&
		sortMe "$scripts" &&
		$v "$pathR$1" ;;
	-a)
		shift; createFile "$pathA$1" &&
		echo "$1		$pathA$1" >> $scripts &&
		sortMe "$scripts" &&
		$v "$pathA$1" ;;
	-t)
		shift; createFile "$pathT$1" &&
		echo "$1		$pathT$1" >> $scripts &&
		sortMe "$scripts" &&
		$v "$pathT$1" ;;
	-sh)
		shift; if [ -f "$pathS$1" ]; then 
				errorMsg "File exists" && exit 1
			else
				$v $pathS$1 &&
				[ -f "$pathS$1" ] && (echo "$1			$pathS$1" >> $shell && sortMe "$shell") ||
				errorMsg "File not created"
			fi ;;
	-d)
		shift; rm "$(grep -w "$1" $scripts $shell | awk '{ print $2 }')" &&
			if ( grep -qw "$1" $scripts ); then
				sed "/$1$/d" -i $scripts && errorMsg "$1 rm from scripts"
			elif ( grep -qw "$1" $shell ); then
				sed "/$1$/d" -i $shell && errorMsg "$1 rm from shell"
			else 
				errorMsg "$1 not found"
			fi ;;
	*) 	
		createFile "$path$1" &&
		echo "$1		$path$1" >> $scripts &&
		sortMe "$scripts" &&
		$v "$path$1" ;;
esac
